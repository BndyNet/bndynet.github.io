<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Bendy Zhang">
    <meta http-equiv="Content-Language" content="en">
<link rel="alternate" hreflang="en" href=" http://bndy.net/gists/2018/04/04/JVM-Java-virtual-machine.html"/>
<link rel="alternate" hreflang="cn" href="http://bndy.net/cn/gists/2018/04/04/JVM-Java-virtual-machine.html"/>


    <title>BNDY.NET</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">

    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css">

    <!-- Plugin CSS -->
    <link rel="stylesheet" href="/css/animate.min.css" type="text/css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-93843808-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-93843808-1');
    </script>
</head>


<body id="page-top">
  <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand page-scroll" href="/">
                BNDY.NET
            </a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a class="icon" href="https://hub.docker.com/r/bndynet/" target="_blank">
                        
                            <img src="https://www.docker.com/favicon/favicon-32x32.png" title="My Dockers" />
                        
                    </a>
                </li>
                
                <li>
                    <a class="icon" href="https://www.npmjs.com/org/bndynet" target="_blank">
                        
                            <img src="https://static.npmjs.com/58a19602036db1daee0d7863c94673a4.png" title="NPM Packages" />
                        
                    </a>
                </li>
                
                <li>
                    <a class="icon" href="https://www.mvnrepository.com/artifact/net.bndy" target="_blank">
                        
                            <img src="http://maven.apache.org/images/maven-logo-black-on-white.png" title="Maven" />
                        
                    </a>
                </li>
                
                <li>
                    <a class="icon" href="https://bndy.visualstudio.com/" target="_blank">
                        
                            <i class="fa fa-2x fa fa-windows" title="Microsoft VSTS"></i>
                        
                    </a>
                </li>
                
                <li>
                    <a class="icon" href="http://github.com/bndynet" target="_blank">
                        
                            <i class="fa fa-2x fa fa-github" title="GitHub"></i>
                        
                    </a>
                </li>
                
                
<li>
    <a href="http://bndy.net/cn"> 中文 </a>
</li>


            </ul>
            <form id="searchForm" class="navbar-form navbar-right">
                <input type="text" class="input-keywords-gists" placeholder="Search Gists...">
                <button type="submit" class="btn-search-gists"> 
                    <i class="fa fa-search"></i> 
                </button>
            </form>
        </div>
    </div>
</nav>

  <div class="content-wrapper">
    <div class="container">
        <div class="row">
	<div class="col-md-8 col-md-offset-2">
		<div class="back-box">
			<a href="/blog/archive">
				<i class="fa fa-chevron-left"></i>
				Back
			</a>
		</div>
		<article itemscope itemtype="http://schema.org/Article">
			<div>
				

				<div itemprop="name">
					<h1>
                        JVM - Java virtual machine
                        
                    </h1>
				</div>
            </div>


            
                
                <p class="teaser" itemprop="description">
                    A **Java virtual machine (JVM)** is an abstract computing machine that enables a computer to run a Java program. There are three notions of the JVM: specification, implementation, and instance. The specification is a document that formally describes what is required of a JVM implementation. Having a single specification ensures all implementations are interoperable. A JVM implementation is a computer program that meets the requirements of the JVM specification. An instance of a JVM is an implementation running in a process that executes a computer program compiled into Java bytecode.
                </p>
                
			

			<div itemprop="articleSection">
			<p>A <strong>Java virtual machine (JVM)</strong> is an abstract computing machine that enables a computer to run a Java program. There are three notions of the JVM: specification, implementation, and instance. The specification is a document that formally describes what is required of a JVM implementation. Having a single specification ensures all implementations are interoperable. A JVM implementation is a computer program that meets the requirements of the JVM specification. An instance of a JVM is an implementation running in a process that executes a computer program compiled into Java bytecode.</p>

<p><strong>Java Runtime Environment (JRE)</strong> is a software package that contains what is required to run a Java program. It includes a Java Virtual Machine implementation together with an implementation of the Java Class Library. The Oracle Corporation, which owns the Java trademark, distributes a Java Runtime environment with their Java Virtual Machine called HotSpot.</p>

<p><strong>Java Development Kit (JDK)</strong> is a superset of a JRE and contains tools for Java programmers, e.g. a javac compiler. The Java Development Kit is provided free of charge either by Oracle Corporation directly, or by the OpenJDK open source project, which is governed by Oracle.</p>

<h2 id="how-jvm-works">How JVM Works</h2>

<p>JVM(Java Virtual Machine) acts as a run-time engine to run Java applications. JVM is the one that actually calls the <code class="highlighter-rouge">main</code> method present in a java code. JVM is a part of JRE(Java Run Environment).</p>

<p>Java applications are called WORA (Write Once Run Everywhere). This means a programmer can develop Java code on one system and can expect it to run on any other Java enabled system without any adjustment. This is all possible because of JVM.</p>

<p>When we compile a .java file, a .class file(contains byte-code) with the same filename is generated by the Java compiler. This .class file goes into various steps when we run it. These steps together describe the whole JVM.</p>

<p><img src="https://cdncontribute.geeksforgeeks.org/wp-content/uploads/jvm-3.jpg" alt="" /></p>

<h3 id="class-loader-subsystem">Class Loader Subsystem</h3>

<p>It is mainly responsible for three activities.</p>

<ul>
  <li>Loading</li>
  <li>Linking</li>
  <li>Initialization</li>
</ul>

<p><strong>Loading</strong> : The Class loader reads the .class file, generate the corresponding binary data and save it in method area. For each .class file, JVM stores following information in method area.</p>

<ul>
  <li>Fully qualified name of the loaded class and its immediate parent class.</li>
  <li>Whether .class file is related to Class or Interface or Enum</li>
  <li>Modifier, Variables and Method information etc.</li>
</ul>

<p>After loading .class file, JVM creates an object of type Class to represent this file in the heap memory. Please note that this object is of type Class predefined in java.lang package. This Class object can be used by the programmer for getting class level information like name of class, parent name, methods and variable information etc. To get this object reference we can use getClass() method of Object class.</p>

<p><strong>Note</strong> : For every loaded .class file, only one object of Class is created.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ClassName class1 = new ClassName();
ClassName class2 = new ClassName();
Class c1 = class1.getClass();
Class c2 = class2.getClass();
System.out.println(c1==c2); // true
</code></pre></div></div>

<p><strong>Linking</strong> : Performs verification, preparation, and (optionally) resolution.</p>

<ul>
  <li>Verification : It ensures the correctness of .class file i.e. it check whether this file is properly formatted and generated by valid compiler or not. If verification fails, we get run-time exception java.lang.VerifyError.</li>
  <li>Preparation : JVM allocates memory for class variables and initializing the memory to default values.</li>
  <li>Resolution : It is the process of replacing symbolic references from the type with direct references. It is done by searching into method area to locate the referenced entity.</li>
</ul>

<p><strong>Initialization</strong> : In this phase, all static variables are assigned with their values defined in the code and static block(if any). This is executed executed from top to bottom in a class and from parent to child in class hierarchy.</p>

<p>In general there are three class loaders :</p>

<ul>
  <li>Bootstrap class loader : Every JVM implementation must have a bootstrap class loader, capable of loading trusted classes. It loads core java API classes present in <strong>JAVA_HOME/jre/lib directory</strong>. This path is popularly known as bootstrap path. It is implemented in native languages like C, C++.</li>
  <li>Extension class loader : It is child of bootstrap class loader. It loads the classes present in the extensions directories <strong>JAVA_HOME/jre/lib/ext</strong>(Extension path) or any other directory specified by the java.ext.dirs system property. It is implemented in java by the sun.misc.Launcher$ExtClassLoader class.</li>
  <li>System/Application class loader : It is child of extension class loader. It is responsible to load classes from application class path. It internally uses Environment Variable which mapped to java.class.path. It is also implemented in Java by the <code class="highlighter-rouge">sun.misc.Launcher$AppClassLoader</code> class.</li>
</ul>

<p><strong>Note</strong> : JVM follow Delegation-Hierarchy principle to load classes. System class loader delegate load request to extension class loader and extension class loader delegate request to boot-strap class loader. If class found in boot-strap path, class is loaded otherwise request again transfers to extension class loader and then to system class loader. At last if system class loader fails to load class, then we get run-time exception java.lang.ClassNotFoundException.</p>

<p><img src="https://cdncontribute.geeksforgeeks.org/wp-content/uploads/jvmclassloader.jpg" alt="" /></p>

<h3 id="jvm-memory">JVM Memory</h3>

<p><strong>Method area</strong> :In method area, all class level information like class name, immediate parent class name, methods and variables information etc. are stored, including static variables. There is only one method area per JVM, and it is a shared resource.
Heap area :Information of all objects is stored in heap area. There is also one Heap Area per JVM. It is also a shared resource.</p>

<p><strong>Stack area</strong> :For every thread, JVM create one run-time stack which is stored here. Every block of this stack is called activation record/stack frame which store methods calls. All local variables of that method are stored in their corresponding frame. After a thread terminate, it’s run-time stack will be destroyed by JVM. It is not a shared resource.</p>

<p><strong>PC Registers</strong> :Store address of current execution instruction of a thread. Obviously each thread has separate PC Registers.</p>

<p><strong>Native method stacks</strong> :For every thread, separate native stack is created. It stores native method information.</p>

<p><img src="https://cdncontribute.geeksforgeeks.org/wp-content/uploads/jvm-memory-2.jpg" alt="" /></p>

<h3 id="execution-engine">Execution Engine</h3>

<p>Execution engine execute the .class (bytecode). It reads the byte-code line by line, use data and information present in various memory area and execute instructions. It can be classified in three parts :-</p>

<ul>
  <li><strong>Interpreter</strong> : It interprets the bytecode line by line and then executes. The disadvantage here is that when one method is called multiple times, every time interpretation is required.</li>
  <li><strong>Just-In-Time Compiler(JIT)</strong> : It is used to increase efficiency of interpreter.It compiles the entire bytecode and changes it to native code so whenever interpreter see repeated method calls,JIT provide direct native code for that part so re-interpretation is not required,thus efficiency is improved.</li>
  <li><strong>Garbage Collector</strong> : It destroy un-referenced objects.For more on Garbage Collector,refer Garbage Collector.</li>
</ul>

<h3 id="java-native-interface-jni">Java Native Interface (JNI)</h3>

<p>It is a interface which interacts with the Native Method Libraries and provides the native libraries(C, C++) required for the execution. It enables JVM to call C/C++ libraries and to be called by C/C++ libraries which may be specific to hardware.</p>

<h3 id="native-method-libraries">Native Method Libraries</h3>

<p>It is a collection of the Native Libraries(C, C++) which are required by the Execution Engine.</p>


			</div>
		</article>
	</div>
</div>
    </div>
  </div>
  <footer>
    Copyright &copy; 2013-2017 BNDY.NET
</footer>
  <!-- jQuery -->
<script src="/js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="/js/jquery.easing.min.js"></script>
<script src="/js/jquery.fittext.js"></script>
<script src="/js/wow.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/creative.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script> 
<script src="http://bndynet.github.io/github.js/dist/github.js"></script>
<script src="/js/init.js"></script>

</body>

</html>